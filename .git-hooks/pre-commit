#!/bin/bash
# Pre-commit Hook - Tests Automatiques
# Ce hook emp√™che les commits si les tests √©chouent

echo "üîç Lancement des tests automatiques..."
echo ""

# Lancer les tests Node.js
node tests/test-runner.js

# Capturer le code de sortie
TEST_EXIT_CODE=$?

if [ $TEST_EXIT_CODE -ne 0 ]; then
    echo ""
    echo "‚ùå COMMIT BLOQU√â : Les tests ont √©chou√©."
    echo ""
    echo "Corrige les erreurs avant de commiter :"
    echo "  1. V√©rifie les erreurs ci-dessus"
    echo "  2. Corrige les fichiers concern√©s"
    echo "  3. Relance : npm test"
    echo "  4. R√©essaye : git commit"
    echo ""
    exit 1
fi

echo ""
echo "‚úÖ Tous les tests sont pass√©s. Commit autoris√©."
echo ""
exit 0
