<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zyvah - Studio Maths (Week 1)</title>
    <style>
        :root {
            --bg: #0f0a1a;
            --card: #1a1429;
            --accent: #d946ef; /* Rose/Violet Studio */
            --accent-glow: rgba(217, 70, 239, 0.4);
            --success: #00ffcc;
            --text: #ffffff;
            --text-dim: #94a3b8;
            --border: #332a4d;
            --font: 'Plus Jakarta Sans', system-ui, sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: var(--font); }
        body { background: var(--bg); color: var(--text); overflow: hidden; height: 100vh; }

        #app {
            width: 100%; max-width: 480px; height: 100vh;
            margin: auto; background: var(--card); overflow-y: auto;
            position: relative; display: flex; flex-direction: column;
            border-left: 1px solid var(--border); border-right: 1px solid var(--border);
        }

        .header { padding: 20px; border-bottom: 1px solid var(--border); background: rgba(217, 70, 239, 0.05); }
        .progress-meta { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 10px; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; }
        .bar-container { height: 6px; background: #000; border-radius: 10px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--accent); width: 0%; transition: 0.8s cubic-bezier(0.22, 1, 0.36, 1); box-shadow: 0 0 15px var(--accent-glow); }

        .view { display: none; padding: 20px; animation: slideUp 0.4s ease; }
        .view.active { display: block; }

        /* LOBBY STYLE */
        .lobby-title { font-size: 2rem; font-weight: 800; margin-bottom: 10px; color: var(--accent); }
        .lobby-intro { color: var(--text-dim); margin-bottom: 30px; line-height: 1.5; font-size: 1rem; }
        .days-grid { display: grid; gap: 15px; }
        .day-card { 
            background: #241d3d; border: 1px solid var(--border); padding: 20px; 
            border-radius: 20px; display: flex; align-items: center; gap: 15px;
            cursor: pointer; transition: 0.3s;
        }
        .day-card:hover { transform: scale(1.02); border-color: var(--accent); }
        .day-card.locked { opacity: 0.4; cursor: not-allowed; filter: grayscale(0.8); }
        .day-card.completed { border-color: var(--success); background: rgba(0, 255, 204, 0.05); }
        .day-card .icon { width: 45px; height: 45px; background: var(--accent); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1.2rem; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .day-card.completed .icon { background: var(--success); color: #000; }
        .day-info h3 { font-size: 1.1rem; margin-bottom: 4px; }
        .day-info p { font-size: 0.85rem; color: var(--text-dim); }

        /* CONTENT */
        .step-header { margin-bottom: 25px; }
        .step-header h2 { font-size: 1.4rem; color: var(--accent); }
        .content-body { line-height: 1.7; font-size: 1.05rem; }
        .studio-box { background: rgba(255,255,255,0.03); border: 1.5px dashed var(--border); border-radius: 16px; padding: 20px; margin: 20px 0; position: relative; }
        .studio-box::before { content: "üéπ MIXER"; position: absolute; top: -12px; left: 15px; background: var(--accent); font-size: 0.7rem; padding: 2px 8px; border-radius: 4px; font-weight: 800; }
        
        .opt-list { margin-top: 20px; display: grid; gap: 12px; }
        .opt-btn { 
            padding: 18px; background: #241d3d; border: 1px solid var(--border); border-radius: 16px; 
            color: #fff; text-align: left; font-size: 1rem; cursor: pointer; transition: 0.2s;
        }
        .opt-btn.correct { background: var(--success) !important; color: #000; font-weight: 800; }
        .opt-btn.wrong { background: #ff4757 !important; border-color: #ff4757; }

        .footer { padding: 20px; background: var(--card); border-top: 1px solid var(--border); }
        .btn-next { 
            width: 100%; padding: 20px; background: var(--accent); border: none; border-radius: 18px;
            color: white; font-weight: 800; font-size: 1.1rem; cursor: pointer;
            box-shadow: 0 4px 20px var(--accent-glow);
        }
        .btn-next:disabled { opacity: 0.2; transform: scale(0.98); }

        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        b { color: var(--accent); }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="app">
    <div class="header">
        <div class="progress-meta">
            <span id="p-text">STUDIO PROGRESS : 0%</span>
            <span id="s-tag">LOBBY</span>
        </div>
        <div class="bar-container"><div id="p-bar" class="bar-fill"></div></div>
    </div>

    <!-- LOBBY -->
    <div id="lobby" class="view active">
        <h1 class="lobby-title">Studio Maths</h1>
        <p class="lobby-intro">Hey Zyvah ! Apprends √† mixer les nombres comme tu mixes tes sons. Ici, la pr√©cision, c'est la cl√© du succ√®s.</p>
        <div class="days-grid" id="grid"></div>
    </div>

    <!-- CONTENT -->
    <div id="content" class="view">
        <div class="step-header"><h2 id="st-title"></h2></div>
        <div id="st-body" class="content-body"></div>
    </div>

    <div class="footer hidden" id="footer">
        <button id="next" class="btn-next">CONTINUER</button>
    </div>
</div>

<script>
    const STORAGE_KEY = "zyvah_math_w1";
    let state = JSON.parse(localStorage.getItem(STORAGE_KEY)) || { done: [], curDay: null, curStep: 0 };

    function save() { localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }

    const data = [
        {
            id: 1, title: "L'Ordre du Mixage", intro: "Priorit√© aux Parenth√®ses (Le Master).",
            steps: [
                { type: "msg", title: "Le Code du Studio", body: `<p>Pour que le son soit bon, il y a un ordre. En maths, c'est pareil : on appelle √ßa les <b>Priorit√©s</b>.</p><div class="studio-box"><p>1. Les <b>Parenth√®ses ( )</b> : On s'en occupe TOUJOURS en premier, c'est le Master !</p></div>` },
                { type: "quiz", title: "Test Cabine", q: "Dans le calcul 5 + (2 √ó 3), par quoi commences-tu ?", opts: ["5 + 2", "2 √ó 3", "5 + 3"], a: 1, feed: "Exact ! Le Master ( ) passe avant le reste." },
                { type: "msg", title: "Calcul de Rythme", body: `<p>Si tu calcules mal l'ordre, ta m√©lodie va √™tre 'off-beat'.</p><div class="studio-box"><p>(10 - 2) √ó 5 = ?<br>D'abord 10-2 = 8. Puis 8 √ó 5 = <b>40</b>.</p></div>` },
                { type: "quiz", title: "Action !", q: "Calcule : (3 + 7) √ó 2", opts: ["17", "20", "13"], a: 1, feed: "10 √ó 2 = 20. Propre !" }
            ]
        },
        {
            id: 2, title: "Multiplication & Gain",
            intro: "La puissance des √ó et √∑.",
            steps: [
                { type: "msg", title: "Le Gain", body: `<p>Apr√®s les parenth√®ses, les multiplications (<b>√ó</b>) et divisions (<b>√∑</b>) sont plus fortes que les additions (<b>+</b>).</p><div class="studio-box">2 + 5 √ó 2 = ? <br>On fait d'abord 5 √ó 2 = 10. <br>Puis 2 + 10 = <b>12</b>.</div>` },
                { type: "quiz", title: "R√©glage Niveau", q: "Calcule : 10 - 2 √ó 4", opts: ["32", "2", "8"], a: 1, feed: "Bien ! 10 - 8 = 2." }
            ]
        },
        {
            id: 3, title: "L'√âgaliseur (Gauche √† Droite)",
            intro: "Quand les signes ont la m√™me force.",
            steps: [
                { type: "msg", title: "Le Flow", body: `<p>Si tu n'as que des + et des -, ou que des √ó et des √∑, on suit le flow de <b>gauche √† droite</b>.</p>` },
                { type: "quiz", title: "Test Flow", q: "Calcule : 20 √∑ 5 √ó 2", opts: ["2", "8", "4"], a: 1, feed: "20√∑5=4, puis 4√ó2=8. Le flow est respect√© !" }
            ]
        },
        {
            id: 4, title: "Effets Sp√©ciaux",
            intro: "M√©lange complet des priorit√©s.",
            steps: [
                { type: "msg", title: "Le Mix Final", body: `<p>Pr√™te pour un mixage complet ? Rappelle-toi : master ( ), puis gain √ó√∑, puis flow + -.</p>` },
                { type: "quiz", title: "Calcul Complexe", q: "12 + (10 √∑ 2) √ó 2", opts: ["22", "34", "17"], a: 0, feed: "12 + 5 √ó 2 = 12 + 10 = 22. Score parfait !" }
            ]
        },
        {
            id: 5, title: "Certification Producer",
            intro: "Validation de tes comp√©tences.",
            steps: [
                { type: "quiz", title: "Examen Final", q: "Lequel donne 50 ?", opts: ["(5 + 5) √ó 5", "5 + 5 √ó 5", "5 √ó (5 + 1)"], a: 0, feed: "10 √ó 5 = 50. Tu es pr√™te pour le studio !" }
            ]
        }
    ];

    const ui = {
        lobby: document.getElementById('lobby'),
        content: document.getElementById('content'),
        grid: document.getElementById('grid'),
        bar: document.getElementById('p-bar'),
        txt: document.getElementById('p-text'),
        tag: document.getElementById('s-tag'),
        foot: document.getElementById('footer'),
        next: document.getElementById('next'),
        title: document.getElementById('st-title'),
        body: document.getElementById('st-body')
    };

    function init() {
        renderLobby();
        progress();
        ui.next.onclick = () => {
            const day = data.find(d => d.id === state.curDay);
            if (state.curStep < day.steps.length - 1) {
                state.curStep++;
                renderStep();
            } else {
                finishDay();
            }
            save();
        };
    }

    function progress() {
        const perc = Math.round((state.done.length / data.length) * 100);
        ui.bar.style.width = perc + "%";
        ui.txt.innerText = `STUDIO PROGRESS : ${perc}%`;
    }

    function renderLobby() {
        ui.lobby.classList.add('active');
        ui.content.classList.remove('active');
        ui.foot.classList.add('hidden');
        ui.tag.innerText = "LOBBY";
        ui.grid.innerHTML = "";
        data.forEach((d, i) => {
            const locked = i > 0 && !state.done.includes(data[i-1].id);
            const done = state.done.includes(d.id);
            const card = document.createElement('div');
            card.className = `day-card ${locked ? 'locked' : ''} ${done ? 'completed' : ''}`;
            card.innerHTML = `<div class="icon">${done ? '‚òÖ' : d.id}</div><div class="day-info"><h3>${d.title}</h3><p>${d.intro}</p></div>`;
            if(!locked) card.onclick = () => start(d.id);
            ui.grid.appendChild(card);
        });
    }

    function start(id) {
        state.curDay = id; state.curStep = 0;
        ui.lobby.classList.remove('active');
        ui.content.classList.add('active');
        ui.foot.classList.remove('hidden');
        ui.tag.innerText = `SESSION ${id}`;
        renderStep();
        save();
    }

    function renderStep() {
        const step = data.find(d => d.id === state.curDay).steps[state.curStep];
        ui.title.innerText = step.title;
        ui.next.disabled = step.type === 'quiz';
        ui.next.innerText = (state.curStep === data.find(d => d.id === state.curDay).steps.length - 1) ? "VALIDER" : "SUIVANT";

        if (step.type === 'msg') {
            ui.body.innerHTML = step.body;
        } else {
            ui.body.innerHTML = `<p style="margin-bottom:20px">${step.q}</p><div class="opt-list"></div>`;
            const list = ui.body.querySelector('.opt-list');
            step.opts.forEach((o, i) => {
                const btn = document.createElement('button');
                btn.className = "opt-btn";
                btn.innerText = o;
                btn.onclick = () => {
                    if (i === step.a) {
                        btn.classList.add('correct');
                        ui.next.disabled = false;
                        const f = document.createElement('p');
                        f.style.marginTop = "15px"; f.style.color = "var(--success)";
                        f.innerHTML = `<b>‚úì</b> ${step.feed}`;
                        ui.body.appendChild(f);
                        list.querySelectorAll('button').forEach(b => b.disabled = true);
                    } else {
                        btn.classList.add('wrong');
                        setTimeout(() => btn.classList.remove('wrong'), 500);
                    }
                };
                list.appendChild(btn);
            });
        }
    }

    function finishDay() {
        if (!state.done.includes(state.curDay)) state.done.push(state.curDay);
        state.curDay = null; renderLobby(); progress();
    }

    init();
</script>

</body>
</html>
