<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="icon" href="data:;base64,iVBORw0KGgo= ">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lovyc - Tactical Comms (Français) | Semaine 2</title>
    <!-- Mutualisation des ressources -->
    <link rel="stylesheet" href="../../../assets/lovyc/tactical.css">
</head>
<body>

<div id="app">
    <!-- HEADER & PROGRESS BAR -->
    <div class="header">
        <div class="progress-meta">
            <span id="progress-text">SYNCHRO TACTIQUE : 0%</span>
            <span id="session-tag">CENTRE DE COMMANDE</span>
        </div>
        <div class="bar-container"><div id="main-bar" class="bar-fill"></div></div>
    </div>

    <!-- LOBBY VIEW -->
    <div id="view-lobby" class="view active">
        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 30px;">
            <div style="width: 50px; height: 50px; background: var(--accent); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px var(--accent-glow);">
                <svg viewBox="0 0 24 24" style="width: 30px; fill: #000;"><path d="M14,10H19.5L14,4.5V10M5,2H15L21,8V20A2,2 0 0,1 19,22H5C3.89,22 3,21.1 3,20V4C3,2.89 3.89,2 5,2M5,4V20H19V12H12V4H5Z"/></svg>
            </div>
            <h1 class="lobby-title" style="margin-bottom: 0;">Tactical Comms</h1>
        </div>
        <p class="lobby-intro">Agent Lovyc, après la structure, place au rythme. La ponctuation est le code qui dicte la vitesse de tes transmissions.</p>
        
        <div class="days-grid" id="days-grid">
            <!-- Dynamically generated -->
        </div>

        <a href="../../../index.html" class="btn-nav" style="margin-top: 30px; width: 100%; text-align: center; display: block; border: 1px solid rgba(255,255,255,0.1);">RETOUR AU HUB</a>
    </div>

    <!-- CONTENT VIEW (LESSON + QUIZ) -->
    <div id="view-content" class="view">
        <h2 id="step-title" style="margin-bottom:20px;"></h2>
        <div id="step-body"></div>
    </div>

    <!-- SUCCESS VIEW -->
    <div id="view-success" class="view">
        <div class="success-card">
            <div class="visual-anchor">
                <svg viewBox="0 0 200 200" style="width: 180px; height: 180px;">
                    <defs>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="5" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    <path d="M60 40 L140 40 L130 100 Q100 130 70 100 Z" fill="none" stroke="var(--accent)" stroke-width="4" filter="url(#glow)"/>
                    <path d="M80 40 L80 20 M120 40 L120 20" stroke="var(--accent)" stroke-width="2"/>
                    <circle cx="100" cy="75" r="20" fill="var(--accent)" opacity="0.2"/>
                    <text x="100" y="82" text-anchor="middle" style="fill: var(--accent); font-family: var(--font-mono); font-weight: 900; font-size: 20px;">MVP</text>
                    
                    <path d="M20 20 L40 20 M20 20 L20 40" stroke="var(--accent)" stroke-width="1" opacity="0.5"/>
                    <path d="M180 20 L160 20 M180 20 L180 40" stroke="var(--accent)" stroke-width="1" opacity="0.5"/>
                    <path d="M20 180 L40 180 M20 180 L20 160" stroke="var(--accent)" stroke-width="1" opacity="0.5"/>
                    <path d="M180 180 L160 180 M180 180 L180 160" stroke="var(--accent)" stroke-width="1" opacity="0.5"/>
                </svg>
            </div>
            <h1 style="color: var(--success); text-align: center; font-weight: 900; margin-bottom: 10px;">MISSION ACCOMPLIE !</h1>
            <p style="text-align: center; color: var(--text-dim); margin-bottom: 30px;">Ton grade a été mis à jour. La transmission est fluide et rythmée.</p>
            <div class="box-concept" style="text-align: center; border-style: solid; background: rgba(0,255,136,0.05); border-color: var(--success);">
                <span style="color: var(--success); font-weight: 800;">REVIENS DEMAIN</span><br>
                POUR LA PROCHAINE MISSION TACTIQUE.
            </div>
            <button onclick="location.reload()" class="btn-main" style="width: 100%; margin-top: 20px;">RETOUR AU CENTRE DE COMMANDE</button>
        </div>
    </div>

    <div class="footer-nav hidden" id="footer">
        <div class="btn-group">
            <button id="btn-prev" class="btn-nav hidden">RETOUR</button>
            <button id="btn-next" class="btn-main">CONTINUER</button>
        </div>
    </div>
</div>

<!-- Scripts shared -->
<script src="../../../assets/shared/engine.js"></script>
<script src="../../../assets/lovyc/fr_validator.js"></script>

<script>
    // Configuration spécifique au module
    var APP_CONFIG = {
        STORAGE_KEY: "lovyc_fr_w2"
    };

    var weekData = [
        {
            id: 1,
            title: "Le Souffle : La Virgule",
            intro: "Rythmer ses transmissions pour ne pas perdre l'attention de l'escouade.",
            steps: [
                {
                    type: "lesson",
                    title: "Briefing : Respiration Slam",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 40" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <path d="M10 20 Q30 5 50 20 T90 20" stroke-dasharray="2,2"/>
                                  <circle cx="50" cy="20" r="3" fill="var(--accent)"/>
                                  <text x="48" y="35" style="fill: var(--accent); font-size: 10px; font-weight: bold; font-family: monospace;">,</text>
                                </svg>
                              </div>
                              
                              <div class="content-chunk">
                                <p>Comme dans un texte de <b>Gaël Faye</b> ou un morceau d'<b>Oxmo Puccino</b>, la virgule n'est pas qu'un signe technique, c'est ton <b>souffle</b>.</p>
                                
                                <p>Elle sert à séparer des éléments dans une liste ou à marquer une courte pause sans couper le signal. C'est elle qui donne du "groove" à ta phrase.</p>
                              </div>

                              <div class="box-concept">
                                ✅ J'ai pris mon casque<b>,</b> mes gants et ma souris.<br><br>
                                <b>Exemple de Flaubert :</b><br>
                                <i>"Elle était pâle, elle marchait vite, elle semblait chercher quelqu'un."</i>
                              </div>

                              <div class="content-chunk">
                                <p><b>Alerte Hack :</b> Ne place JAMAIS de virgule entre le Sujet et le Verbe. C'est comme débrancher ta manette en plein move : ça casse l'exécution.</p>
                              </div>`
                },
                {
                    type: "interactive",
                    title: "Détection de Micro-coupure",
                    question: "Où manque-t-il une virgule pour que la phrase soit fluide ? <br><br><i>Le capitaine Lovyc analyse la map il déploie ses drones.</i>",
                    options: ["Après 'Lovyc'", "Après 'map'", "Après 'déploie'"],
                    answer: 1,
                    feedback: "Correct. La pause se fait entre deux actions distinctes."
                },
                {
                    type: "write",
                    title: "Saisie Rythmique",
                    question: "Réécris cette phrase en ajoutant les <b>deux</b> virgules nécessaires : <br><br><i>lag - sature - ping - le - montent - les - et - arrive - serveur - le</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: [",", "serveur", "ping", "lag"]
                    },
                    hint: "Il y a trois actions. Sépare les deux premières par des virgules.",
                    feedback: "Bravo. Ton flow est désormais ininterrompu."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Jour 1",
                    question: "Rédige une phrase listant 3 équipements tactiques (ex: radar, drone, radio) en utilisant correctement les virgules et le mot 'et' :",
                    requirements: {
                        mode: "sentence",
                        keywords: [",", "et"]
                    },
                    hint: "Objet 1, Objet 2 et Objet 3.",
                    feedback: "Transmission reçue. Ton inventaire est clair, Agent."
                }
            ]
        },
        {
            id: 2,
            title: "Dialogue & Incises",
            intro: "Rendre les rapports de mission vivants en citant tes alliés.",
            steps: [
                {
                    type: "lesson",
                    title: "Le Rapport de George Sand",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 40" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <path d="M10 10 L30 10 M10 30 L30 30" opacity="0.5"/>
                                  <text x="40" y="25" style="fill: var(--accent); font-size: 8px; font-weight: bold; font-family: monospace;">— DIT-IL</text>
                                </svg>
                              </div>
                              <p>Quand tu rapportes un dialogue, utilise le <b>tiret cadratin</b> (—) pour montrer qui parle. C'est la base de la précision littéraire.</p>
                              <p>L'<b>incise</b> (ex: <i>dit l'agent</i>, <i>répond le coach</i>) permet de savoir qui a transmis l'info sans alourdir le texte.</p>
                              <div class="box-concept">
                                — La zone est sécurisée, <b>affirma Lovyc</b>.
                              </div>`
                },
                {
                    type: "interactive",
                    title: "Identification de Source",
                    question: "Dans cette phrase, quelle partie est l'incise ? <br><br><i>— Le patch arrive demain, murmura le développeur.</i>",
                    options: ["— Le patch arrive demain", "murmura le développeur", "le développeur"],
                    answer: 1,
                    feedback: "Exactement. L'incise donne le ton et l'auteur de la parole."
                },
                {
                    type: "write",
                    title: "Codage de Dialogue",
                    question: "Complète ce dialogue avec une incise de ton choix (ex: s'exclama Zyvah, répondit le chef) : <br><br><i>— Attention au sniper à gauche, _______.</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["Lovyc", "Zyvah", "chef", "agent", "dit", "répondit", "s'exclama", "hurla", "murmura"]
                    },
                    hint: "Utilise un verbe de parole et un nom de personnage.",
                    feedback: "Parfait. On sait maintenant d'où vient l'alerte."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Jour 2",
                    question: "Écris une courte ligne de dialogue commençant par un tiret cadratin (—) et finissant par une incise (ex: dit-il, répondit Lovyc) :",
                    requirements: {
                        mode: "sentence",
                        keywords: ["—"]
                    },
                    hint: "N'oublie pas le tiret au début et la virgule avant l'incise si nécessaire.",
                    feedback: "Dialogue validé. La communication entre agents est fluide."
                }
            ]
        },
        {
            id: 3,
            title: "L'Intensité (Points !?...)",
            intro: "Utiliser la ponctuation de fin pour donner de la force à tes ordres.",
            steps: [
                {
                    type: "lesson",
                    title: "Briefing : Signaux de Fin",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 40" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <circle cx="20" cy="20" r="1.5" fill="var(--accent)"/>
                                  <text x="45" y="25" style="fill: var(--accent); font-size: 15px; font-weight: 900;">!</text>
                                  <text x="75" y="25" style="fill: var(--accent); font-size: 15px; font-weight: 900;">?</text>
                                </svg>
                              </div>
                              <p>Le point final (.) est neutre. Mais en situation critique, tu as besoin de plus :</p>
                              <ul>
                                <li><b>!</b> (Exclamation) : Pour l'urgence ou l'ordre.</li>
                                <li><b>?</b> (Interrogation) : Pour le doute ou le scan.</li>
                                <li><b>...</b> (Suspension) : Pour le suspens ou l'attente.</li>
                              </ul>
                              <p>Attention à ne pas en abuser, sinon ton signal devient illisible (ex: PAS DE SPAM !!!).</p>`
                },
                {
                    type: "interactive",
                    title: "Analyse de Signal",
                    question: "Quelle ponctuation choisirais-tu pour une alerte imminente ?",
                    options: ["Le point simple (.)", "Le point d'exclamation (!)", "Les points de suspension (...)"],
                    answer: 1,
                    feedback: "Correct. L'urgence demande une exclamation."
                },
                {
                    type: "write",
                    title: "Nuance Tactique",
                    question: "Transforme cet ordre neutre en une question inquiète : <br><br><i>Le drone est encore en vol.</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["?"]
                    },
                    hint: "Change juste le point final par un point d'interrogation.",
                    feedback: "Le doute est transmis. L'escouade va vérifier."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Jour 3",
                    question: "Écris une phrase d'action se terminant par des points de suspension (...) pour montrer que quelque chose arrive :",
                    requirements: {
                        mode: "sentence",
                        keywords: ["..."]
                    },
                    hint: "Ex: Les ombres approchent doucement...",
                    feedback: "Suspens réussi. Tes troupes sont en alerte."
                }
            ]
        },
        {
            id: 4,
            title: "Précision Technique",
            intro: "Utiliser les deux-points et les parenthèses pour les détails d'expert.",
            steps: [
                {
                    type: "lesson",
                    title: "Le Briefing Expert",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 40" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <text x="30" y="25" style="fill: var(--border); font-size: 15px;">( )</text>
                                  <text x="60" y="25" style="fill: var(--accent); font-size: 15px;">:</text>
                                </svg>
                              </div>
                              <p>Pour être un maître de la comm, utilise les outils des pros :</p>
                              <ul>
                                <li><b>Les deux-points (:)</b> : Pour introduire une liste ou une explication.</li>
                                <li><b>Les parenthèses ()</b> : Pour ajouter une précision technique sans casser le rythme.</li>
                              </ul>
                              <div class="box-concept">
                                Rapport : Lovyc a 3 items (rare, épique, légendaire).
                              </div>`
                },
                {
                    type: "interactive",
                    title: "Logistique de Phrase",
                    question: "Que permettent d'introduire les deux-points (:) ?",
                    options: ["Une pause pour respirer", "Une liste ou une explication", "Le nom de l'auteur"],
                    answer: 1,
                    feedback: "Exactement. C'est le signal de l'inventaire ou de la preuve."
                },
                {
                    type: "write",
                    title: "Saisie de Précision",
                    question: "Ajoute une précision entre parenthèses sur la map (ex: map de nuit) dans cette phrase : <br><br><i>Nous arrivons sur la map.</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["(", ")"]
                    },
                    hint: "Insère tes parenthèses juste après le mot 'map'.",
                    feedback: "Donnée enregistrée. L'escouade connaît désormais les détails."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Jour 4",
                    question: "Écris une phrase utilisant les deux-points (:) pour lister deux choses nécessaires à ta mission :",
                    requirements: {
                        mode: "sentence",
                        keywords: [":"]
                    },
                    hint: "Ex: J'ai besoin de deux choses : mon clavier et mon casque.",
                    feedback: "Logistique impeccable. Tu es prêt pour le déploiement final."
                }
            ]
        },
        {
            id: 5,
            title: "L'Ultime Déploiement",
            intro: "Synthèse finale : Rédige ton rapport de terrain complet.",
            steps: [
                {
                    type: "lesson",
                    title: "Briefing : Fusion de Styles",
                    content: `
                              <p>Agent Lovyc, tu maîtrises maintenant :</p>
                              <ul>
                                <li>La respiration (virgules).</li>
                                <li>Le dialogue (tirets & incises).</li>
                                <li>L'intensité (points !?...).</li>
                                <li>La précision (deux-points & parenthèses).</li>
                              </ul>
                              <p>C'est l'heure de compiler tout ça dans ton rapport final. Sois précis, sois tactique.</p>`
                },
                {
                    type: "interactive",
                    title: "Revue de Code",
                    question: "Quelle ponctuation est incorrecte ici : <br><i>L'agent (Lovyc) déploie : ses deux, drones</i>",
                    options: ["La parenthèse", "Les deux-points", "La virgule entre 'deux' et 'drones'"],
                    answer: 2,
                    feedback: "Correct. On n'isole pas l'adjectif du nom avec une virgule."
                },
                {
                    type: "write",
                    title: "Rapport Tactique 1",
                    question: "Rédige une phrase avec un dialogue court (—...) et une incise au présent :",
                    requirements: {
                        mode: "sentence",
                        keywords: ["—", "Lovyc"]
                    },
                    hint: "Ex: — Je passe à droite, dit Lovyc.",
                    feedback: "Communication claire."
                },
                {
                    type: "write",
                    title: "Rapport Tactique 2",
                    question: "Rédige une phrase contenant une liste de deux éléments séparés par deux-points (:) :",
                    requirements: {
                        mode: "sentence",
                        keywords: [":"]
                    },
                    hint: "Ex: La zone contient deux menaces : un sniper et un char.",
                    feedback: "Cible identifiée."
                },
                {
                    type: "challenge",
                    title: "L'ULITME MISSION ACCOMPLIE",
                    question: "Rédige ton rapport final de 3 lignes (au moins 20 mots) incluant : une virgule, une parenthèse et un point d'exclamation. Sois héroïque !",
                    requirements: {
                        mode: "sentence",
                        mustInclude: [",", "(", ")", "!"],
                        minWords: 15
                    },
                    hint: "Utilise le textarea pour raconter ta victoire finale.",
                    feedback: "Félicitations Agent Lovyc. Ton grade 'Maître des Comms' est officiellement validé. À demain pour de nouveaux défis !"
                }
            ]
        }
    ];

    // Démarrage du moteur
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof initEngine === 'function') {
            initEngine(weekData);
        } else {
            console.error("Erreur : Le moteur engine.js n'est pas chargé.");
        }
    });

</script>

</body>
</html>
