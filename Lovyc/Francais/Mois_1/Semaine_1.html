<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="icon" href="data:;base64,iVBORw0KGgo= ">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lovyc - Tactical Comms (Français)</title>
    <!-- Mutualisation des ressources -->
    <link rel="stylesheet" href="../../../assets/lovyc/tactical.css">
</head>
<body>

<div id="app">
    <!-- HEADER & PROGRESS BAR -->
    <div class="header">
        <div class="progress-meta">
            <span id="progress-text">SYNCHRO TACTIQUE : 0%</span>
            <span id="session-tag">CENTRE DE COMMANDE</span>
        </div>
        <div class="bar-container"><div id="main-bar" class="bar-fill"></div></div>
    </div>

    <!-- LOBBY VIEW -->
    <div id="view-lobby" class="view active">
        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 30px;">
            <div style="width: 50px; height: 50px; background: var(--accent); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px var(--accent-glow);">
                <svg viewBox="0 0 24 24" style="width: 30px; fill: #000;"><path d="M12,2L4.5,20.29L5.21,21L12,18L18.79,21L19.5,20.29L12,2Z"/></svg>
            </div>
            <h1 class="lobby-title" style="margin-bottom: 0;">Tactical Comms</h1>
        </div>
        <p class="lobby-intro">Agent Lovyc, la clarté est ton arme principale. Maîtrise la syntaxe pour coordonner tes missions et dominer le terrain.</p>
        
        <div class="days-grid" id="days-grid">
            <!-- Dynamically generated -->
        </div>

        <a href="../../../index.html" class="btn-nav" style="margin-top: 30px; width: 100%; text-align: center; display: block; border: 1px solid rgba(255,255,255,0.1);">RETOUR AU HUB</a>
    </div>

    <!-- CONTENT VIEW (LESSON + QUIZ) -->
    <div id="view-content" class="view">
        <h2 id="step-title" style="margin-bottom:20px;"></h2>
        <div id="step-body"></div>
    </div>

    <!-- SUCCESS VIEW -->
    <div id="view-success" class="view">
        <div class="success-card">
            <div class="visual-anchor">
                <svg viewBox="0 0 200 200" style="width: 180px; height: 180px;">
                    <defs>
                        <filter id="glow">
                            <feGaussianBlur stdDeviation="5" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                    </defs>
                    <!-- Trophy/Medal Shape -->
                    <path d="M60 40 L140 40 L130 100 Q100 130 70 100 Z" fill="none" stroke="var(--accent)" stroke-width="4" filter="url(#glow)"/>
                    <path d="M80 40 L80 20 M120 40 L120 20" stroke="var(--accent)" stroke-width="2"/>
                    <circle cx="100" cy="75" r="20" fill="var(--accent)" opacity="0.2"/>
                    <text x="100" y="82" text-anchor="middle" style="fill: var(--accent); font-family: var(--font-mono); font-weight: 900; font-size: 20px;">MVP</text>
                    
                    <!-- Tactical HUD elements -->
                    <path d="M20 20 L40 20 M20 20 L20 40" stroke="var(--accent)" stroke-width="1" opacity="0.5"/>
                    <path d="M180 20 L160 20 M180 20 L180 40" stroke="var(--accent)" stroke-width="1" opacity="0.5"/>
                    <path d="M20 180 L40 180 M20 180 L20 160" stroke="var(--accent)" stroke-width="1" opacity="0.5"/>
                    <path d="M180 180 L160 180 M180 180 L180 160" stroke="var(--accent)" stroke-width="1" opacity="0.5"/>
                </svg>
            </div>
            <h1 style="color: var(--success); text-align: center; font-weight: 900; margin-bottom: 10px;">MISSION ACCOMPLIE !</h1>
            <p style="text-align: center; color: var(--text-dim); margin-bottom: 30px;">Ton grade a été mis à jour. Le terrain est sécurisé pour aujourd'hui.</p>
            <div class="box-concept" style="text-align: center; border-style: solid; background: rgba(0,255,136,0.05); border-color: var(--success);">
                <span style="color: var(--success); font-weight: 800;">REVIENS DEMAIN</span><br>
                POUR LA PROCHAINE MISSION TACTIQUE.
            </div>
            <button onclick="location.reload()" class="btn-main" style="width: 100%; margin-top: 20px;">RETOUR AU CENTRE DE COMMANDE</button>
        </div>
    </div>

    <div class="footer-nav hidden" id="footer">
        <div class="btn-group">
            <button id="btn-prev" class="btn-nav hidden">RETOUR</button>
            <button id="btn-next" class="btn-main">CONTINUER</button>
        </div>
    </div>
</div>

<script>
    // Configuration spécifique au module
    var APP_CONFIG = {
        STORAGE_KEY: "lovyc_fr_w1_v2"
    };

    var weekData = [
        {
            id: 1,
            title: "Le Noyau : S + V + C",
            intro: "Identifier les agents essentiels d'une phrase pour une transmission parfaite.",
            steps: [
                {
                    type: "lesson",
                    title: "Briefing : La Squad de Base",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 60" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <!-- Center Agent -->
                                  <circle cx="50" cy="20" r="8" />
                                  <path d="M35 50 L35 45 C35 38 42 34 50 34 C58 34 65 38 65 45 L65 50" />
                                  <!-- Left Sidekick -->
                                  <circle cx="20" cy="25" r="5" opacity="0.4" />
                                  <path d="M10 50 L10 47 C10 42 15 40 20 40 C25 40 30 42 30 47 L30 50" opacity="0.4" />
                                  <!-- Right Sidekick -->
                                  <circle cx="80" cy="25" r="5" opacity="0.4" />
                                  <path d="M70 50 L70 47 C70 42 75 40 80 40 C85 40 90 42 90 47 L90 50" opacity="0.4" />
                                </svg>
                              </div>
                              <div class="content-chunk">
                                <p>Agent Lovyc, une phrase, c'est comme ta Squad dans <b>Valorant</b> ou un équipage dans un roman de <b>Maupassant</b> : chaque membre a un rôle vital. Si ton perso n'a pas d'<b>Action</b> (Verbe), tu ne peux pas gagner la game.</p>
                                
                                <p>Pour transmettre un ordre clair, tu as besoin de trois éléments inséparables :</p>
                              </div>

                              <div class="box-concept">
                                [1] <b>L'Agent</b> (Sujet) : Qui lance l'action ?<br>
                                [2] <b>L'Action</b> (Verbe) : Que fait-on ?<br>
                                [3] <b>L'Objectif</b> (Complément) : Quel est le but ?
                              </div>

                              <div class="content-chunk">
                                <p>Sans verbe, ton perso est <b>AFK</b> (Away From Keyboard). Le message est figé, le temps s'arrête, et personne ne comprend tes intentions. En littérature comme en gaming, le verbe est le moteur du mouvement.</p>
                              </div>`
                },
                {
                    type: "interactive",
                    title: "Scan de Zone 1",
                    question: "Dans cette phrase, quel mot est <b>L'Agent</b> (celui qui fait l'action) ? <br><br><i>Le pro-gamer lance une attaque parfaite.</i>",
                    options: ["l'attaque", "Le pro-gamer", "parfaite"],
                    answer: 1,
                    feedback: "Correct ! C'est le pro-gamer qui est aux commandes."
                },
                {
                    type: "interactive",
                    title: "Scan de Zone 2",
                    question: "Trouve maintenant le <b>Verbe</b> (l'action) : <br><br><i>Le pro-gamer lance une attaque parfaite.</i>",
                    options: ["lance", "une attaque", "pro-gamer"],
                    answer: 0,
                    feedback: "Exact ! 'Lance' est le mouvement, l'action."
                },
                {
                    type: "write",
                    title: "Saisie Tactique",
                    question: "Écris le mot qui manque (le Verbe) pour que la phrase fonctionne : <br><br><i>Lovyc ____ son écran de jeu.</i>",
                    requirements: {
                        keywords: ["regarde", "allume", "fixe", "nettoie", "prépare"],
                        mode: "verb"
                    },
                    hint: "Cherche une action concrète (regarde, allume, fixe...)",
                    feedback: "Bien ! N'importe lequel de ces verbes d'action valide la phrase."
                },
                {
                    type: "lesson",
                    title: "Le Danger du Verbe 'Être'",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 60" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <!-- Shield Base -->
                                  <path d="M30 10 L70 10 L70 40 C70 50 50 55 50 55 C50 55 30 50 30 40 Z" />
                                  <line x1="40" y1="30" x2="60" y2="30" stroke-width="3" opacity="0.3" />
                                </svg>
                              </div>
                              <div class="content-chunk">
                                <p>Attention au tic de langage fréquent dans le chat ou sur Discord : <b>'Je suis en appel'</b> ou <b>'Je suis au foot'</b>. C'est correct, mais c'est un signal "plat".</p>
                                
                                <p>En littérature, on utilise des verbes d'état (être, paraître, sembler), mais les grands maîtres comme <b>Hugo</b> ou <b>Zola</b> préfèrent les verbes d'action pour donner de la force au récit.</p>
                              </div>

                              <div class="box-concept">
                                <b>Signal Passif :</b> Je suis sur mon vélo.<br>
                                <b>Signal Actif :</b> Je <b>pédale</b> sur mon vélo.<br><br>
                                <b>Signal Passif :</b> Lovyc est devant l'écran.<br>
                                <b>Signal Actif :</b> Lovyc <b>scrute</b> son écran.
                              </div>

                              <div class="content-chunk">
                                <p>Pour être un leader de guilde ou un écrivain respecté, utilise des verbes riches. Ils décrivent ton mouvement avec précision.</p>
                              </div>`
                },
                {
                    type: "write",
                    title: "Optimisation de Signal",
                    question: "Remplace 'suis' par un verbe d'action plus précis : <br><br><i>Je suis dans ma chambre.</i>",
                    requirements: {
                        mode: "sentence",
                        forbidden: ["suis"]
                    },
                    hint: "Que fais-tu dans ta chambre ? (dors, joue, range...)",
                    feedback: "Gagné ! Un leader utilise des verbes précis pour ses ordres."
                },
                {
                    type: "interactive",
                    title: "Repérage de Phrase Buggée",
                    question: "Laquelle de ces phrases n'a <b>PAS</b> de verbe (elle est 'AFK') ?",
                    options: ["Les joueurs attendent le patch.", "Demain, le gros tournoi national.", "Nous gagnons le match."],
                    answer: 1,
                    feedback: "Bien vu ! 'Demain, le gros tournoi' n'annonce aucune action. Elle est buggée."
                },
                {
                    type: "write",
                    title: "Récupération de Données",
                    question: "Réécris la phrase en ajoutant un verbe d'action et une circonstance : <br><br><i>commencer - le - pluie - tournoi - demain - malgré - national - la - gros</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["tournoi", "pluie"],
                        enforceKeywords: true
                    },
                    hint: "Commence par le sujet, ajoute le verbe, puis la circonstance (malgré la pluie).",
                    feedback: "Phrase réparée ! Le signal est maintenant complet."
                },
                {
                    type: "lesson",
                    title: "L'Ordre Tactique",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 60" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <!-- DNA/Chain link for sequence -->
                                  <path d="M20 30 Q35 15 50 30 T80 30" opacity="0.4" />
                                  <circle cx="20" cy="30" r="4" fill="var(--accent)" />
                                  <circle cx="50" cy="30" r="4" fill="var(--accent)" />
                                  <circle cx="80" cy="30" r="4" fill="var(--accent)" />
                                </svg>
                              </div>

                              <div class="content-chunk">
                                <p>En français, si on veut être compris en 1ms, on suit un flux de données précis : <b>S</b>ujet → <b>V</b>erbe → <b>C</b>omplément.</p>
                                
                                <p>C'est ce qu'on appelle la <b>phrase simple</b>. Des auteurs comme <b>Gaël Faye</b> utilisent souvent cette structure courte et percutante pour donner du rythme au texte.</p>
                              </div>

                              <div class="box-concept">
                                <p><b>❌ Flux Corrompu :</b> Un skin je veux acheter.<br>
                                <b>✅ Flux Optimisé :</b> <b>Je veux acheter</b> un skin.</p>
                                
                                <p><b>❌ Flux Corrompu :</b> Sous l'arbre le loup dort.<br>
                                <b>✅ Flux Optimisé :</b> <b>Le loup dort</b> sous l'arbre.</p>
                              </div>

                              <div class="content-chunk">
                                <p>Évite de "parler comme Yoda" ou de traduire littéralement du chat anglais. Garde l'ordre S+V+C pour une clarté maximale.</p>
                              </div>`
                },
                {
                    type: "write",
                    title: "Réorganisation de Comm",
                    question: "Réécris cette phrase dans le bon ordre tactique (S+V+C) en conjuguant le verbe et en plaçant les éléments de précision : <br><br><i>pression - Lovyc - déployer - la - agent - stratégie - l' - malgré - sa</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["agent", "Lovyc", "déploie", "stratégie", "pression"],
                        enforceKeywords: true
                    },
                    hint: "Commence par le sujet (L'agent Lovyc...), conjugue 'déployer' au présent (déploie...), puis ajoute l'objectif et la circonstance.",
                    feedback: "Ordre rétabli. Ta communication est désormais digne d'un officier de terrain."
                },
                {
                    type: "interactive",
                    title: "Choix Final",
                    question: "Laquelle de ces phrases respecte l'ordre S+V+C et possède un verbe d'action riche ?",
                    options: ["Dans le jeu je suis bien.", "J'élimine mes adversaires avec précision.", "Mes amis et moi sur le serveur."],
                    answer: 1,
                    feedback: "Correct. C'est précis, actif et structuré."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Mission 1",
                    question: "Rédige une phrase complète (S+V+C) au <b>présent</b> avec le verbe 'ÉLIMINER' :",
                    requirements: {
                        keywords: ["élimine", "élimines", "éliminent", "éliminons", "éliminez"]
                    },
                    hint: "Rappel : Sujet (Qui?) + Verbe (Quelle action?) + Complément (Quoi?).",
                    feedback: "Félicitations Agent ! Mission 1 accomplie à 100%. Ton noyau est stable."
                }
            ]
        },
        {
            id: 2,
            title: "Accord Multi-joueurs",
            intro: "Maîtriser le pluriel et le code -ENT pour éviter les bugs de lecture.",
            steps: [
                {
                    type: "lesson",
                    title: "Le Serveur Squad",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 60" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <!-- Multiple Agents Linked -->
                                  <circle cx="30" cy="25" r="5" />
                                  <circle cx="50" cy="20" r="6" />
                                  <circle cx="70" cy="25" r="5" />
                                  <path d="M20 50 L40 50 M60 50 L80 50" opacity="0.5" />
                                  <path d="M40 45 L60 45" stroke-width="3" />
                                  <text x="38" y="55" style="fill: var(--accent); font-size: 8px; font-weight: bold; font-family: monospace;">-ENT</text>
                                </svg>
                              </div>

                              <div class="content-chunk">
                                <p>Quand tu es en solo, le verbe finit souvent par <b>'e'</b> ou <b>'s'</b>. Mais dès que tu passes en mode <b>Squad (Pluriel)</b>, le système change radicalement.</p>
                                
                                <p>Le code secret du pluriel pour les verbes du 1er groupe (ceux en -ER comme <i>marcher, tirer, gagner</i>), c'est l'extension <b>-ENT</b>.</p>
                              </div>

                              <div class="box-concept">
                                <b>Mode Solo :</b> Le joueur <b>tire</b>.<br>
                                <b>Mode Squad :</b> Les joueurs <b>tirent</b>.<br><br>
                                <b>Exemple Littéraire (Hugo) :</b><br>
                                <i>"Les enfants <b>jouent</b>, les mères <b>veillent</b>."</i>
                              </div>

                              <div class="content-chunk">
                                <p>Attention : on ne prononce jamais ce <b>-ENT</b> à l'oral. C'est un marqueur visuel pour le cerveau du lecteur, un peu comme une icône de statut dans un HUD.</p>
                              </div>`
                },
                {
                    type: "interactive",
                    title: "Patch Correctif 1",
                    question: "Choisis la bonne terminaison : <br><br><i>Mes coéquipiers ____ la zone.</i>",
                    options: ["sécurise", "sécurisent", "sécurises"],
                    answer: 1,
                    feedback: "Bien joué ! Plusieurs coéquipiers = terminaison -ent."
                },
                {
                    type: "write",
                    title: "Codage Manuel",
                    question: "Réécris la phrase au pluriel correctement : <br><br><i>temps - guilde - le - les - gagner - ma - tout - membres - de</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["membres", "guilde", "gagnent"],
                        enforceKeywords: true
                    },
                    feedback: "Le code -ENT est bien appliqué."
                },
                {
                    type: "lesson",
                    title: "Le Cas du 'ON' (Infiltré)",
                    content: `<p>Attention ! Le pronom <b>'ON'</b> est un agent double. Il veut dire 'nous', mais il se conjugue comme s'il était <b>SOLO</b>.</p>
                              <div class="box-concept">
                                ✅ On <b>part</b> en raid. (Singulier)<br>
                                ❌ On partent en raid. (Bug !)
                              </div>`
                },
                {
                    type: "write",
                    title: "Infiltration",
                    question: "Réécris la phrase correctement : <br><br><i>ensemble - jouer - on - souvent</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["on", "joue", "ensemble"],
                        enforceKeywords: true
                    },
                    feedback: "Exact ! 'On' se comporte comme 'Il' au singulier."
                },
                {
                    type: "interactive",
                    title: "Détection de Faille",
                    question: "Trouve la phrase qui contient une erreur d'accord :",
                    options: ["On joue ensemble.", "Ils courent vite.", "Les adversaires arrive."],
                    answer: 2,
                    feedback: "Correct ! 'Les adversaires' (pluriel) devrait prendre -ent : arrivent."
                },
                {
                    type: "write",
                    title: "Correction de Bug",
                    question: "Réécris la phrase sans erreur : <br><br><i>match - parents - mon - regarde - mes</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["parents", "regardent", "match"],
                        enforceKeywords: true
                    },
                    feedback: "Fix réussi ! Tes parents (ils) = regardent."
                },
                {
                    type: "lesson",
                    title: "Mixité : Moi + Toi",
                    content: `<p>Si tu dis 'Mon pote et moi', c'est comme si tu disais <b>NOUS</b>.</p>
                              <div class="box-concept">
                                Mon pote et moi <b>jouons</b>. (-ONS)
                              </div>`
                },
                {
                    type: "write",
                    title: "Liaison Radio",
                    question: "Réécris la phrase sans erreur : <br><br><i>but - moi - courir - mon - le - et - cousin - vers</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["cousin", "moi", "courons", "but"],
                        enforceKeywords: true
                    },
                    feedback: "Bien ! Lui + Moi = Nous."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Mission 2",
                    question: "Réécris toute cette phrase sans aucune erreur : <br><br><i>terrain - sur - le - saute - joueurs - les</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["joueurs", "sautent", "terrain"],
                        enforceKeywords: true
                    },
                    feedback: "Mission accomplie ! L'accord de la squad est parfait."
                }
            ]
        },
        {
            id: 3,
            title: "Le Flux Dynamique",
            intro: "Rythmer ses messages avec la ponctuation pour ne pas s'essouffler.",
            steps: [
                {
                    type: "lesson",
                    title: "Le Scan de Ponctuation",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 60" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <!-- Split Signal -->
                                  <path d="M10 30 Q 25 10, 40 30" />
                                  <circle cx="50" cy="30" r="3" fill="var(--accent)" />
                                  <path d="M60 30 Q 75 50, 90 30" />
                                  <!-- Point indicator -->
                                  <rect x="48" y="40" width="4" height="4" fill="var(--accent)" />
                                </svg>
                              </div>

                              <div class="content-chunk">
                                <p>Un mur de texte sans points, c'est comme un serveur qui sature : ton interlocuteur perd le fil et finit par "déconnecter".</p>
                                
                                <p>Le <b>Point (.)</b> marque la fin d'une transmission complète. On l'appelle souvent le "point final", mais c'est surtout un signal de respiration pour le lecteur.</p>
                              </div>

                              <div class="box-concept">
                                <b>Le Point (.) :</b> Fin d'action / Pause totale.<br>
                                <b>La Virgule (,) :</b> Micro-pause / Liste de composants.
                              </div>

                              <div class="content-chunk">
                                <p>Dans les romans d'aventures (comme ceux de <b>Jules Verne</b>), la ponctuation crée du suspense. Elle ralentit ou accélère ton rythme cardiaque selon l'endroit où elle est placée.</p>
                              </div>`
                },
                {
                    type: "write",
                    title: "Split de Signal",
                    question: "Sépare ces deux actions par un point : <br><br><i>se - commence - Lovyc - prépare - match - le</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["match", "Lovyc", "prépare"],
                        enforceKeywords: true,
                        mustInclude: ["."]
                    },
                    feedback: "Parfait. Deux actions, deux phrases distinctes."
                },
                {
                    type: "lesson",
                    title: "La Virgule (Le Boost)",
                    content: `
                              <div class="content-chunk">
                                <p>La virgule sert à lister des objets ou à donner un détail sans couper le courant. C'est le "boost" qui permet d'ajouter des infos sans redémarrer une phrase.</p>
                              </div>

                              <div class="box-concept">
                                <b>Liste :</b> Dans mon inventaire, j'ai <i>un skin, une potion, et un bouclier</i>.<br><br>
                                <b>Exemple de Georges Sand :</b><br>
                                <i>"Le vent siffle, l'eau gronde, la terre tremble."</i>
                              </div>

                              <div class="content-chunk">
                                <p>Attention : on ne place jamais de virgule juste avant le mot "et" dans une liste simple. Le "et" suffit à faire la liaison finale.</p>
                              </div>`
                },
                {
                    type: "write",
                    title: "Inventaire Tactical",
                    question: "Ajoute les virgules manquantes pour lister ton stuff : <br><br><i>badminton - j' - basket - Valorant - et - aime - le - le</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["basket", "badminton", "Valorant"],
                        enforceKeywords: true,
                        mustInclude: [","]
                    },
                    feedback: "Exact. On ne met pas de virgule avant le 'et', il fait déjà le lien."
                },
                {
                    type: "write",
                    title: "Saisie de Précision",
                    question: "Écris une phrase où tu listes 3 jeux que tu aimes, avec les virgules au bon endroit :",
                    requirements: {
                        mode: "sentence",
                        keywords: ["j'aime", "joue"],
                        enforceKeywords: true,
                        mustInclude: [","]
                    },
                    feedback: "Signal validé. Ta liste est bien structurée."
                },
                {
                    type: "interactive",
                    title: "Correction de Chat",
                    question: "Où placer la virgule ? <br><br><i>Si tu gagnes je te rejoins.</i>",
                    options: ["Si tu gagnes, je te rejoins.", "Si tu, gagnes je te rejoins.", "Si tu gagnes je te, rejoins."],
                    answer: 0,
                    feedback: "Correct ! La virgule marque la condition."
                },
                {
                    type: "write",
                    title: "Echo Tactique",
                    question: "Transforme cette question en affirmation pointée : <br><br><i>ouvert - est - est - que - le - ce - serveur - ?</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["serveur", "est", "ouvert"],
                        enforceKeywords: true
                    },
                    feedback: "Transmission claire et directe."
                },
                {
                    type: "lesson",
                    title: "L'Exclamation (Le Cri)",
                    content: `<p>À utiliser avec parcimonie pour montrer l'urgence ou la joie.</p>
                              <div class="box-concept">
                                ✅ Attention derrière toi !<br>
                                ❌ Pourquoi tu fais ça !!?!!! (Trop de bruit)
                              </div>`
                },
                {
                    type: "write",
                    title: "Alerte Squad",
                    question: "Écris un message d'alerte pour tes coéquipiers avec un point d'exclamation :",
                    requirements: {
                        mode: "sentence",
                        keywords: ["attention", "danger", "vite"],
                        enforceKeywords: true,
                        mustInclude: ["!"]
                    },
                    feedback: "Alerte reçue 5/5."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Mission 3",
                    question: "Réécris proprement ce message buggé : <br><br><i>appel - plus - d' - l' - j' - batterie - arrête - y'a - de</i>",
                    requirements: {
                        keywords: ["batterie", "appel"]
                    },
                    hint: "N'oublie pas de séparer les deux idées par une virgule ou un point.",
                    feedback: "Mission accomplie. Le flux est fluide."
                }
            ]
        },
        {
            id: 4,
            title: "Filtres de Précision",
            intro: "Éliminer les parasites (a/à, est/et) pour une transmission sans bug.",
            steps: [
                {
                    type: "lesson",
                    title: "Le Scan A vs À",
                    content: `
                              <div class="visual-anchor">
                                <svg viewBox="0 0 100 60" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                                  <circle cx="30" cy="30" r="10" />
                                  <text x="25" y="35" style="fill:var(--accent); font-weight:bold;">a</text>
                                  <line x1="50" y1="20" x2="50" y2="40" stroke-width="1" opacity="0.3" />
                                  <circle cx="70" cy="30" r="10" />
                                  <text x="65" y="35" style="fill:var(--accent); font-weight:bold;">à</text>
                                </svg>
                              </div>

                              <div class="content-chunk">
                                <p>C'est l'erreur la plus fréquente dans les transmissions (chat, emails, devoirs). Si tu la laisses passer, ton grade d'agent baisse instantanément.</p>
                                
                                <p>Pour filtrer ce bug, utilise le <b>Test du Passé</b>. Si tu peux remplacer le mot par "AVAIT", c'est qu'il s'agit du verbe avoir.</p>
                              </div>

                              <div class="box-concept">
                                <b>a (sans accent) :</b> On peut dire <i>"avait"</i>. (Il a gagné → Il avait gagné).<br>
                                <b>à (avec accent) :</b> On ne peut pas. C'est une direction (Il va à Paris).
                              </div>

                              <div class="content-chunk">
                                <p>Astuce tactique : mémorise la phrase de <b>Colette</b> : <i>"Le temps <b>a</b> laissé son manteau <b>à</b> la porte."</i></p>
                              </div>`
                },
                {
                    type: "interactive",
                    title: "Test de Signal 1",
                    question: "Choisis le bon code : <br><br><i>Lovyc ____ gagné son match.</i>",
                    options: ["a (avait)", "à"],
                    answer: 0,
                    feedback: "Bravo. On peut dire 'Lovyc avait gagné', donc c'est le verbe."
                },
                {
                    type: "write",
                    title: "Saisie de Destination",
                    question: "Réécris la phrase sans erreur : <br><br><i>sport - a - vais - la - de - salle - je</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["vais", "à", "salle", "sport"],
                        enforceKeywords: true
                    },
                    feedback: "Correct. On ne peut pas dire 'avait la salle', l'accent est obligatoire."
                },
                {
                    type: "lesson",
                    title: "Le Scan EST vs ET",
                    content: `
                              <div class="content-chunk">
                                <p>C'est la même logique de filtrage ici. On distingue le verbe de la simple addition de données.</p>
                              </div>

                              <div class="box-concept">
                                <b>est :</b> Verbe Être. Test : <i>"était"</i>. (Il est fort → Il était fort).<br>
                                <b>et :</b> Addition. Test : <i>"et puis"</i>. (Toi et moi → Toi et puis moi).
                              </div>

                              <div class="content-chunk">
                                <p>Dans <i>Le Petit Prince</i>, <b>Saint-Exupéry</b> écrit : <i>"Droit devant soi, on ne peut pas aller bien loin."</i> Si tu ajoutes : <i>"C'<b>est</b> vrai <b>et</b> triste"</i>, tu as les deux filtres !</p>
                              </div>`
                },
                {
                    type: "interactive",
                    title: "Test de Signal 2",
                    question: "Choisis le bon lien : <br><br><i>Le serveur ____ en maintenance.</i>",
                    options: ["est", "et"],
                    answer: 0,
                    feedback: "Exact. Le serveur 'était' en maintenance."
                },
                {
                    type: "write",
                    title: "Combo Tactique",
                    question: "Réécris la phrase sans erreur : <br><br><i>et - est - rapide - le - pro-gamer - precis</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["est", "rapide", "et", "précis"],
                        enforceKeywords: true
                    },
                    feedback: "Parfait ! Il 'était' rapide 'et puis' précis."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Mission 4",
                    question: "Corrige cette phrase pleine de parasites : <br><br><i>va - a - il - raquette - a - salle - la - et - une - il</i>",
                    requirements: {
                        keywords: ["a", "et", "à"]
                    },
                    hint: "Utilise les tests : avait, et puis, avait.",
                    feedback: "Filtres activés. Ton message est cristallin."
                }
            ]
        },
        {
            id: 5,
            title: "L'Ultime Déploiement",
            intro: "Validation finale de ton grade d'Agent Tactique.",
            steps: [
                {
                    type: "msg",
                    title: "Examen de Grade",
                    body: `
                        <div class="visual-anchor">
                          <svg viewBox="0 0 100 60" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                            <!-- Graduation / Badge -->
                            <polygon points="50,10 90,25 50,40 10,25" />
                            <path d="M10,25 L10,40 Q10,50 50,55 Q90,50 90,40 L90,25" />
                            <line x1="50" y1="40" x2="50" y2="55" />
                          </svg>
                        </div>
                        <div class="content-chunk">
                          <p>Agent Lovyc, c'est l'heure du <b>déploiement final</b>. Pour valider ta Semaine 1 et obtenir ton premier badge d'Expert Linguistique, tu dois prouver que tu maîtrises tout l'équipement tactique.</p>
                          
                          <p>Comme dans une mission d'infiltration, chaque mot compte. Un bug de ponctuation ou un mauvais accord peut compromettre toute l'opération.</p>
                        </div>`
                },
                {
                    type: "interactive",
                    title: "Module 1 : Structure S+V+C",
                    question: "Dans <i>Bel-Ami</i> de Maupassant, quel flux de données respecte l'ordre S+V+C ?",
                    options: [
                        "Dujardin la rue descendait.",
                        "Dujardin descendait la rue.",
                        "La rue descendait Dujardin."
                    ],
                    answer: 1,
                    feedback: "Structure littéraire verrouillée. L'ordre S+V+C est la base de la clarté."
                },
                {
                    type: "write",
                    title: "Module 2 : Accord Squad",
                    question: "Corrige cette phrase buggée (Hugo) en respectant le code -ENT : <br><br><i>marcher - les - ombre - dans - l' - hommes</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["hommes", "marchent", "ombre"],
                        enforceKeywords: true
                    },
                    feedback: "Liaison squad établie. Les hommes (ils) -> marchent."
                },
                {
                    type: "interactive",
                    title: "Module 3 : Ponctuation",
                    question: "Quel message est le plus efficace pour tes alliés ?",
                    options: ["vite on y va aidez moi", "Vite ! On y va. Aidez-moi !", "Vite on y va, aidez moi"],
                    answer: 1,
                    feedback: "Rythme de combat validé."
                },
                {
                    type: "write",
                    title: "Module 4 : Correction",
                    question: "Saisis la phrase sans erreur : <br><br><i>Il est a l'heure.</i>",
                    requirements: {
                        mode: "sentence",
                        keywords: ["est", "à", "heure"],
                        enforceKeywords: true
                    },
                    feedback: "Scan de précision 100%."
                },
                {
                    type: "challenge",
                    title: "ULtime Boss - Module 1",
                    question: "Rédige ton rapport final de mission. Tu dois utiliser au moins une virgule, le verbe 'REUSSIR' au présent, et le mot 'TACTIQUE'.",
                    requirements: {
                        mode: "sentence",
                        keywords: ["réussissent", "réussit", "réussis", "réussissons", "réussissez"],
                        mustInclude: [",", "tactique"]
                    },
                    hint: "Exemple : Tes missions réussissent, c'est une victoire tactique.",
                    feedback: "CODE ROUGE TERMINÉ. Félicitations Agent Lovyc, tu passes au grade supérieur !"
                }
            ]
        }
    ];

    window.APP_CONFIG = {
        STORAGE_KEY: 'lovyc_fr_w1_v2',
        MODULE_NAME: 'MODULE 1',
        MISSION_LABEL: 'MISSION'
    };

</script>
<!-- Moteur partagé -->
<script src="../../../assets/lovyc/fr_validator.js"></script>
<script src="../../../assets/shared/engine.js"></script>
</body>
</html>
