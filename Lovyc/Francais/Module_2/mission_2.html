<!DOCTYPE html>
<html lang="fr">
<head>
    <link rel="icon" href="data:;base64,iVBORw0KGgo= ">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lovyc - Mission 2 | Module 2</title>
    <link rel="stylesheet" href="../../../assets/lovyc/tactical.css">
</head>
<body>

<div id="app">
    <div class="header">
        <div class="progress-meta">
            <span id="progress-text">MISSION EN COURS</span>
            <span id="session-tag">CANAL DE DIALOGUE</span>
        </div>
        <div class="bar-container"><div id="main-bar" class="bar-fill"></div></div>
    </div>

    <div id="view-content" class="view active">
        <h2 id="step-title" style="margin-bottom:20px;"></h2>
        <div id="step-body"></div>
    </div>

    <div id="view-success" class="view">
        <div class="success-card">
            <div class="visual-anchor">
                <svg viewBox="0 0 200 200" style="width: 180px; height: 180px;">
                    <path d="M60 40 L140 40 L130 100 Q100 130 70 100 Z" fill="none" stroke="var(--accent)" stroke-width="4" />
                    <text x="100" y="82" text-anchor="middle" style="fill: var(--accent); font-family: var(--font-mono); font-weight: 900; font-size: 20px;">MVP</text>
                </svg>
            </div>
            <h1 class="success-title">MISSION ACCOMPLIE !</h1>
            <p class="success-text">Le rapport est vivant. Les citations sont precises.</p>
            <div class="box-concept next-mission-call">
                <span>REVIENS DEMAIN</span><br>
                POUR LA SUITE.
            </div>
            <button onclick="location.href='index.html'" class="btn-main">RETOUR</button>
        </div>
    </div>

    <div class="footer-nav hidden" id="footer">
        <div class="btn-group">
            <button id="btn-prev" class="btn-nav hidden">RETOUR</button>
            <button id="btn-next" class="btn-main">CONTINUER</button>
        </div>
    </div>
</div>

<script src="../../../assets/shared/engine.js?v=20260210"></script>
<script src="../../../assets/lovyc/fr_validator.js?v=20260210"></script>
<script>
    window.APP_CONFIG = {
        STORAGE_KEY: "lovyc_fr_w2_v2",
        SINGLE_MISSION_MODE: 2
    };

    const weekData = [{
        id: 2,
        title: "Dialogue & Incises",
        steps: [
            {
                type: "lesson",
                title: "Le Rapport de George Sand",
                content: `
                    <div class="visual-anchor">
                    <svg viewBox="0 0 100 40" style="width: 140px; height: auto; stroke: var(--accent); fill: none; stroke-width: 1.5;">
                        <path d="M10 10 L30 10 M10 30 L30 30" opacity="0.5"/>
                        <text x="40" y="25" style="fill: var(--accent); font-size: 8px; font-weight: bold; font-family: monospace;">— DIT-IL</text>
                    </svg>
                    </div>
                    <p>Quand tu rapportes un dialogue, utilise le <b>tiret cadratin</b> (—) pour montrer qui parle. C'est la base de la precision litteraire.</p>
                    <p>L'<b>incise</b> (ex: <i>dit l'agent</i>, <i>repond le coach</i>) permet de savoir qui a transmis l'info sans alourdir le texte.</p>
                    <div class="box-concept">
                    — La zone est securisee, <b>affirma Lovyc</b>.
                    </div>`
            },
            {
                type: "lesson",
                title: "Incise en Action",
                content: `
                    <p>L'incise est un petit bloc qui suit la parole et precise l'auteur.</p>
                    <div class="box-concept">— On avance, <b>murmura l'agent</b>.</div>`
            },
            {
                type: "interactive",
                title: "Identification de Source",
                question: "Dans cette phrase, quelle partie est l'incise ? <br><br><i>— Le patch arrive demain, murmura le developpeur.</i>",
                options: ["— Le patch arrive demain", "murmura le developpeur", "le developpeur"],
                answer: 1,
                feedback: "Exactement. L'incise donne le ton et l'auteur de la parole."
            },
            {
                type: "interactive",
                title: "Dialogue Ou Incise",
                question: "Ou se trouve la parole ? <br><br><i>— On tient la zone, dit Lovyc.</i>",
                options: ["— On tient la zone", "dit Lovyc", "zone"],
                answer: 0,
                feedback: "Le dialogue commence avec le tiret."
            },
            {
                type: "write",
                title: "Codage de Dialogue",
                question: "Complete ce dialogue avec une incise de ton choix (ex: s'exclama Zyvah, repondit le chef) : <br><br><i>— Attention au sniper a gauche, _______.</i>",
                requirements: {
                    mode: "sentence",
                    keywords: ["Lovyc", "Zyvah", "chef", "agent", "dit", "repondit", "s'exclama", "murmura", "hurla"]
                },
                hint: "Utilise un verbe de parole et un nom de personnage.",
                feedback: "Parfait. On sait maintenant d'ou vient l'alerte."
            },
            {
                type: "write",
                title: "Incise Courte",
                question: "Ecris une incise courte (ex: dit l'agent).",
                requirements: {
                    mode: "sentence",
                    keywords: ["dit", "repondit", "murmura", "hurla"]
                },
                feedback: "Incise valide."
            },
            {
                type: "interactive",
                title: "Verbe de Parole",
                question: "Quel mot est un verbe de parole ?",
                options: ["murmura", "rapide", "casque"],
                answer: 0,
                feedback: "Verbe de parole detecte."
            },
            {
                type: "write",
                title: "Dialogue + Incise",
                question: "Ecris une ligne complete de dialogue avec tiret et incise.",
                requirements: {
                    mode: "sentence",
                    keywords: ["—"]
                },
                feedback: "Dialogue valide."
            },
            {
                type: "interactive",
                title: "Placement Virgule",
                question: "Ou place-t-on la virgule ? <br><br><i>— On part ____ dit Lovyc.</i>",
                options: ["avant dit", "apres dit", "pas de virgule"],
                answer: 0,
                feedback: "La virgule precede l'incise."
            },
            {
                type: "write",
                title: "Dialogue Rapide",
                question: "Ecris un dialogue court avec un ordre (ex: Avance).",
                requirements: {
                    mode: "sentence",
                    keywords: ["—"]
                },
                feedback: "Ordre transmis."
            },
            {
                type: "interactive",
                title: "Ligne Correcte",
                question: "Quelle ligne est correcte ?",
                options: ["— On avance, dit Lovyc.", "— On avance dit, Lovyc.", "On avance, — dit Lovyc."],
                answer: 0,
                feedback: "Format propre."
            },
            {
                type: "write",
                title: "Micro Dialogue",
                question: "Ecris deux lignes de dialogue (deux phrases).",
                requirements: {
                    mode: "sentence",
                    minWords: 12,
                    keywords: ["-"],
                    enforceKeywords: true
                },
                feedback: "Communication valide."
            },
            {
                type: "write",
                title: "Rapport de Mission",
                question: "Ecris une phrase avec une incise mais sans dialogue.",
                requirements: {
                    mode: "sentence",
                    keywords: [","]
                },
                feedback: "Incise integree."
            },
            {
                type: "interactive",
                title: "Derniere Validation",
                question: "Quel element est obligatoire pour montrer le dialogue ?",
                options: ["Le tiret cadratin", "Les deux-points", "La parenthese"],
                answer: 0,
                feedback: "Correct."
            },
            {
                type: "challenge",
                title: "Boss de Fin - Mission 2",
                question: "Ecris une courte ligne de dialogue commencant par un tiret cadratin (—) et finissant par une incise (ex: dit-il, repondit Lovyc) :",
                requirements: {
                    mode: "sentence",
                    keywords: ["—"]
                },
                hint: "N'oublie pas le tiret au debut et la virgule avant l'incise si necessaire.",
                feedback: "Dialogue valide. La communication entre agents est fluide."
            }
        ]
    }];

    document.addEventListener('DOMContentLoaded', () => initEngine(weekData));
</script>

</body>
</html>

