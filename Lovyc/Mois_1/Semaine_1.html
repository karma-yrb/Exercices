<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Lovyc French - Squad Leader Training (Week 1)</title>
    <style>
        :root {
            --bg: #0b0a10;
            --card: #1c1b26;
            --accent: #ff3e3e;
            --accent-glow: rgba(255, 62, 62, 0.4);
            --success: #00ff88;
            --text: #ffffff;
            --text-dim: #94a3b8;
            --border: #2d2c3d;
            --font: 'Outfit', 'Inter', system-ui, sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: var(--font); }
        body { background: var(--bg); color: var(--text); overflow: hidden; height: 100vh; }

        /* UI COMPONENTS */
        #app {
            width: 100%; max-width: 480px; height: 100vh;
            margin: auto; background: var(--card); overflow-y: auto;
            position: relative; display: flex; flex-direction: column;
        }

        .header { padding: 20px; border-bottom: 1px solid var(--border); background: rgba(0,0,0,0.2); }
        .progress-meta { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 10px; color: var(--text-dim); }
        .bar-container { height: 8px; background: #000; border-radius: 4px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--accent); width: 0%; transition: 0.5s; box-shadow: 0 0 10px var(--accent-glow); }

        .view { display: none; padding: 20px; animation: fadeIn 0.4s ease; }
        .view.active { display: block; }

        /* LOBBY STYLE */
        .lobby-title { font-size: 1.8rem; font-weight: 800; margin-bottom: 10px; text-transform: uppercase; letter-spacing: -1px; }
        .lobby-intro { color: var(--text-dim); margin-bottom: 30px; line-height: 1.5; }
        .days-grid { display: grid; gap: 15px; grid-template-columns: 1fr; }
        .day-card { 
            background: #252433; border: 1px solid var(--border); padding: 20px; 
            border-radius: 16px; display: flex; align-items: center; gap: 15px;
            cursor: pointer; transition: 0.2s; position: relative;
        }
        .day-card.locked { opacity: 0.5; cursor: not-allowed; filter: grayscale(1); }
        .day-card.completed { border-color: var(--success); }
        .day-card .icon { width: 40px; height: 40px; background: var(--accent); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .day-card.completed .icon { background: var(--success); }
        .day-info h3 { font-size: 1rem; margin-bottom: 4px; }
        .day-info p { font-size: 0.8rem; color: var(--text-dim); }

        /* CONTENT STYLE */
        .content-chunk { margin-bottom: 25px; line-height: 1.6; }
        .box-concept { background: #12111a; border-radius: 12px; padding: 15px; border-left: 4px solid var(--accent); margin-bottom: 20px; }
        .interactive-area { margin: 20px 0; }
        .btn-opt { 
            display: block; width: 100%; padding: 16px; background: rgba(255,255,255,0.05); 
            border: 1px solid var(--border); border-radius: 12px; color: var(--text);
            text-align: left; margin-bottom: 10px; cursor: pointer; transition: 0.2s;
        }
        .btn-opt:active { transform: scale(0.98); }
        .btn-opt.correct { background: var(--success) !important; color: #000; font-weight: bold; }
        .btn-opt.wrong { background: var(--accent) !important; color: #fff; }

        .footer-nav { position: sticky; bottom: 0; padding: 20px; background: var(--card); border-top: 1px solid var(--border); }
        .btn-main { 
            width: 100%; padding: 20px; background: var(--accent); border: none; border-radius: 16px;
            color: white; font-weight: 800; font-size: 1rem; text-transform: uppercase; cursor: pointer;
            box-shadow: 0 4px 15px var(--accent-glow);
        }
        .btn-main:disabled { opacity: 0.3; cursor: not-allowed; }

        /* ANIMATIONS */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .hidden { display: none !important; }
        b { color: var(--accent); }
    </style>
</head>
<body>

<div id="app">
    <!-- HEADER & PROGRESS BAR -->
    <div class="header">
        <div class="progress-meta">
            <span id="progress-text">SQUAD LEVEL : 0%</span>
            <span id="session-tag">LOBBY</span>
        </div>
        <div class="bar-container"><div id="main-bar" class="bar-fill"></div></div>
    </div>

    <!-- LOBBY VIEW -->
    <div id="view-lobby" class="view active">
        <h1 class="lobby-title">Français : Squad Leader</h1>
        <p class="lobby-intro">Bienvenue Lovyc. Ici, on ne parle pas juste pour rien. On communique pour gagner. Maîtrise la syntaxe pour diriger ton équipe et tes projets.</p>
        
        <div class="days-grid" id="days-grid">
            <!-- Dynamically generated -->
        </div>
    </div>

    <!-- CONTENT VIEW (LESSON + QUIZ) -->
    <div id="view-content" class="view">
        <h2 id="step-title" style="margin-bottom:20px;"></h2>
        <div id="step-body"></div>
    </div>

    <div class="footer-nav hidden" id="footer">
        <button id="btn-next" class="btn-main">CONTINUER</button>
    </div>
</div>

<script>
    // DB & PROGRESS MANAGEMENT (LocalStorage)
    const STORAGE_KEY = "lovyc_fr_w1_v2";
    let state = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {
        completedDays: [],
        currentDay: null,
        currentStep: 0
    };

    function saveState() {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    const weekData = [
        {
            id: 1,
            title: "Le Noyau : S + V + C",
            intro: "Identifier les joueurs essentiels d'une phrase.",
            steps: [
                {
                    type: "lesson",
                    title: "Le Scan de la Zone",
                    content: `<p>Une phrase, c'est comme une composition d'équipe. Si tu n'as pas de <b>Buteur</b>, tu ne marques pas.</p>
                              <div class="box-concept">
                                <b>Sujet</b> (Qui ?) + <b>Verbe</b> (Action) + <b>Complément</b> (Quoi ?)
                              </div>
                              <p>Sans verbe, ton message est un "Lag". Personne ne comprend ce qui se passe.</p>`
                },
                {
                    type: "interactive",
                    title: "Détection du Verbe",
                    question: "Dans cette phrase, quel mot est le verbe d'action ? <br><br><i>'Le pro-gamer lance une attaque parfaite.'</i>",
                    options: ["pro-gamer", "lance", "parfaite"],
                    answer: 1,
                    feedback: "Correct ! 'Lance' est l'action. Sans lui, on ne sait pas ce que fait le joueur."
                },
                {
                    type: "lesson",
                    title: "Le Danger du Verbe 'Être'",
                    content: `<p>Attention au tic de langage : <b>'Je suis en appel'</b> ou <b>'Je suis au foot'</b>.</p>
                              <p>C'est correct, mais à l'écrit, on cherche des verbes plus riches. Ça montre que tu es le leader.</p>
                              <div class="box-concept">
                                Moyen : Je suis sur Roblox.<br>
                                <b>Pro :</b> Je <b>pilote</b> un avion sur Roblox.
                              </div>`
                },
                {
                    type: "quiz",
                    title: "Amélioration de message",
                    question: "Comment rendre cette phrase plus efficace ?<br>'Je suis avec ma squad.'",
                    options: ["Je joue avec ma squad.", "C'est ma squad avec moi.", "Moi et ma squad on est là."],
                    answer: 0,
                    feedback: "Exact ! 'Joue' décrit l'action précise."
                },
                {
                    type: "challenge",
                    title: "Boss de Fin - Jour 1",
                    question: "Laquelle de ces phrases respecte l'ordre S+V+C ?",
                    options: ["Demain le match.", "Nous gagnons le tournoi.", "Sur le serveur moi."],
                    answer: 1,
                    feedback: "Félicitations ! Sujet(Nous) + Verbe(Gagnons) + Complément(Le tournoi)."
                }
            ]
        },
        {
            id: 2,
            title: "Accord Multi-joueurs",
            intro: "Maîtriser le pluriel et le -ent.",
            steps: [
                {
                    type: "lesson",
                    title: "Le Serveur Squad",
                    content: `<p>Quand tu es en solo, le verbe finit souvent par 'e' ou 's'. Mais en Squad (Pluriel), il change de version.</p>
                              <p>Le code du serveur pluriel, c'est souvent <b>-ENT</b>.</p>
                              <div class="box-concept">
                                Solo : Le joueur <b>tire</b>.<br>
                                Squad : Les joueurs <b>tirent</b>.
                              </div>`
                },
                {
                    type: "interactive",
                    title: "Correction en Live",
                    question: "Choisis le bon patch : 'Mes potes ____ un nouveau skin.'",
                    options: ["achète", "achètent", "achètes"],
                    answer: 1,
                    feedback: "Bravo ! 'Potes' est au pluriel, donc le verbe prend -ent."
                },
                {
                    type: "lesson",
                    title: "Le Cas 'ON'",
                    content: `<p>Attention ! Quand on utilise 'ON', le verbe reste au <b>singulier</b>, même si on parle de tout le monde.</p>
                              <div class="box-concept">
                                ✅ On <b>part</b> en raid. (Singulier)<br>
                                ❌ On partent en raid. (Erreur !)
                              </div>`
                },
                {
                    type: "quiz",
                    title: "Analyse Rapide",
                    question: "Quelle phrase est correcte ?",
                    options: ["Ils cours vite.", "Elles parlent sur Discord.", "On mangent bientôt."],
                    answer: 1,
                    feedback: "Top ! 'Elles parlent' respecte l'accord pluriel."
                }
            ]
        },
        {
            id: 3,
            title: "Le Ping de la Ponctuation",
            intro: "Utiliser points et virgules pour éviter le crash.",
            steps: [
                {
                    type: "lesson",
                    title: "Le Point = Valider",
                    content: `<p>Écrire sans point, c'est comme envoyer un paquet de données trop lourd : ça crash.</p>
                              <p>Le point permet de respirer et de valider l'information.</p>
                              <div class="box-concept">
                                ❌ J'avance je vois un ennemi je tire.<br>
                                ✅ J'avance. Je vois un ennemi. Je tire.
                              </div>`
                },
                {
                    type: "quiz",
                    title: "Gestion du Ping",
                    question: "Où faut-il couper ? 'Le pack est prêt on y va.'",
                    options: ["Le pack est. Prêt on y va.", "Le pack est prêt. On y va.", "Le pack. Est prêt on y va."],
                    answer: 1,
                    feedback: "Parfait. Deux actions distinctes = deux phrases."
                }
            ]
        },
        {
            id: 4,
            title: "Nettoyage Vocal (Oral vs Écrit)",
            intro: "Supprimer les tics de langage inutiles.",
            steps: [
                {
                    type: "lesson",
                    title: "Le 'Et' vs 'Est'",
                    content: `<p>C'est l'erreur la plus courante sur le chat.</p>
                              <p><b>ET</b> = 'et aussi' (Ajout)<br><b>EST</b> = verbe être (C'est)</p>
                              <div class="box-concept">
                                Le skin <b>est</b> beau <b>et</b> rare.
                              </div>`
                },
                {
                    type: "quiz",
                    title: "Test de Reflexe",
                    question: "Complète : 'Il ___ tard ___ je dois partir.'",
                    options: ["et / est", "est / et", "est / est"],
                    answer: 1,
                    feedback: "Bien vu ! Verbe être d'abord, puis coordination."
                }
            ]
        },
        {
            id: 5,
            title: "Certification Leader",
            intro: "Test final de la semaine.",
            steps: [
                {
                    type: "lesson",
                    title: "Dernière Révision",
                    content: `<p>Un leader écrit avec :<br>1. Une <b>Majuscule</b>.<br>2. Un <b>Sujet</b> clair.<br>3. Un <b>Verbe</b> accordé.<br>4. Un <b>Point</b> final.</p>`
                },
                {
                    type: "challenge",
                    title: "Épreuve Finale",
                    question: "Trouve la phrase parfaite :",
                    options: ["les troupes avance.", "Les troupes avancent.", "Les troupes avances"],
                    answer: 1,
                    feedback: "Missions accomplie ! Tu es prêt."
                }
            ]
        }
    ];

    const el = {
        lobby: document.getElementById('view-lobby'),
        content: document.getElementById('view-content'),
        grid: document.getElementById('days-grid'),
        bar: document.getElementById('main-bar'),
        progText: document.getElementById('progress-text'),
        tag: document.getElementById('session-tag'),
        footer: document.getElementById('footer'),
        btnNext: document.getElementById('btn-next'),
        stepTitle: document.getElementById('step-title'),
        stepBody: document.getElementById('step-body')
    };

    function init() {
        renderLobby();
        updateGlobalProgress();
        
        el.btnNext.onclick = () => {
            const day = weekData.find(d => d.id === state.currentDay);
            if (state.currentStep < day.steps.length - 1) {
                state.currentStep++;
                renderStep();
            } else {
                completeDay();
            }
            saveState();
        };
    }

    function updateGlobalProgress() {
        const total = weekData.length;
        const count = state.completedDays.length;
        const percent = Math.round((count / total) * 100);
        el.bar.style.width = percent + "%";
        el.progText.innerText = `SQUAD LEVEL : ${percent}%`;
    }

    function renderLobby() {
        el.lobby.classList.add('active');
        el.content.classList.remove('active');
        el.footer.classList.add('hidden');
        el.tag.innerText = "LOBBY";
        el.grid.innerHTML = "";

        weekData.forEach((day, index) => {
            const isLocked = index > 0 && !state.completedDays.includes(weekData[index-1].id);
            const isDone = state.completedDays.includes(day.id);
            
            const card = document.createElement('div');
            card.className = `day-card ${isLocked ? 'locked' : ''} ${isDone ? 'completed' : ''}`;
            card.innerHTML = `
                <div class="icon">${isDone ? '✓' : day.id}</div>
                <div class="day-info">
                    <h3>${day.title}</h3>
                    <p>${day.intro}</p>
                </div>
            `;
            
            if (!isLocked) {
                card.onclick = () => startDay(id = day.id);
            }
            el.grid.appendChild(card);
        });
    }

    function startDay(id) {
        state.currentDay = id;
        state.currentStep = 0;
        el.lobby.classList.remove('active');
        el.content.classList.add('active');
        el.footer.classList.remove('hidden');
        el.tag.innerText = `JOUR ${id}`;
        renderStep();
        saveState();
    }

    function renderStep() {
        const day = weekData.find(d => d.id === state.currentDay);
        const step = day.steps[state.currentStep];
        
        el.stepTitle.innerText = step.title;
        el.btnNext.disabled = (step.type === 'interactive' || step.type === 'quiz' || step.type === 'challenge');
        el.btnNext.innerText = (state.currentStep === day.steps.length - 1) ? "TERMINER LE JOUR" : "CONTINUER";

        if (step.type === 'lesson') {
            el.stepBody.innerHTML = step.content;
        } else {
            el.stepBody.innerHTML = `<p class="content-chunk">${step.question}</p>`;
            const area = document.createElement('div');
            area.className = "interactive-area";
            
            step.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "btn-opt";
                btn.innerText = opt;
                btn.onclick = () => {
                    const btns = area.querySelectorAll('.btn-opt');
                    btns.forEach(b => b.disabled = true);
                    
                    if (i === step.answer) {
                        btn.classList.add('correct');
                        const f = document.createElement('p');
                        f.style.marginTop = "15px";
                        f.style.color = "var(--success)";
                        f.innerHTML = `<b>✓</b> ${step.feedback}`;
                        el.stepBody.appendChild(f);
                        el.btnNext.disabled = false;
                    } else {
                        btn.classList.add('wrong');
                        setTimeout(() => {
                            btn.classList.remove('wrong');
                            btns.forEach(b => b.disabled = false);
                        }, 600);
                    }
                };
                area.appendChild(btn);
            });
            el.stepBody.appendChild(area);
        }
        el.content.scrollTop = 0;
    }

    function completeDay() {
        if (!state.completedDays.includes(state.currentDay)) {
            state.completedDays.push(state.currentDay);
        }
        state.currentDay = null;
        state.currentStep = 0;
        renderLobby();
        updateGlobalProgress();
        
        const congrats = document.createElement('div');
        congrats.style = "position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:var(--success); color:#000; padding:20px; border-radius:15px; font-weight:800; z-index:100; animation: fadeIn 0.3s;";
        congrats.innerText = "JOUR VALIDÉ ! +20 XP";
        document.body.appendChild(congrats);
        setTimeout(() => congrats.remove(), 1500);
    }

    init();
</script>

</body>
</html>
